;   _._ ›; o|- -|o This file is licensed under CC4-BY-NC-SA international license.›;  ( l )  To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/›;    =    Author: Jean-Marc "jihem" QUERE 2016 - jean-marc.quere@codyssea.com››INCLUDE "SYS\SYS.ACT"›INCLUDE "LIB\MTH.ACT"›INCLUDE "LIB\GF7.ACT"             ››CARD CTMR=$13›BYTE HTMR=$13›BYTE LTMR=$14››BYTE SKEY=$D01F››INT PX,PY,PA,PV››INT ARRAY AC(8) ›INT ARRAY AP(8)›INT ARRAY AL(8)›BYTE LAC=[3]›BYTE LAL=[3]››;›; ÐÒÇ ››INT FUNC HStick(BYTE port)›  BYTE ARRAY ports(4)=$278›  INT ARRAY value(4)=[0 1 $FFFF 0]›  port==&3›RETURN (value((ports(port)&$C) RSH 2))››INT FUNC VStick(BYTE port)›  BYTE ARRAY ports(4)=$278›  INT ARRAY value(4)=[0 1 $FFFF 0]›  port==&3›RETURN (value(ports(port)&3))››PROC w4s()› WHILE SKEY=6 DO OD› WHILE SKEY#6 DO OD›RETURN››PROC init()› TPoint POINTER p›› MTH()› GF7()  ›› PX=63› PY=40› PA=0› PV=2›› p=AC              p.x=-5  p.y= 5› p=AC+TPointSize   p.x= 0  P.y=-5› p=AC+2*TPointSize p.x= 5  P.y= 5› p=AC+3*TPointSize p.x= 0  P.y= 5›› p=AL              p.x=0  p.y=1› p=AL+TPointSize   p.x=1  P.y=2› p=AL+2*TPointSize p.x=2  P.y=0› p=AL+3*TPointSize p.x=1  P.y=3›RETURN››PROC update()› TPoint POINTER c,p,cp › INT VC,VS› BYTE i›› PA==+10*HSTick(0)› IF PA>360 THEN›  PA==-360› ELSEIF PA<0 THEN›  PA==+360› FI›› IF VStick(0)#0 THEN›  PV=PA-90›  IF PV>360 THEN›   PV==-360›  ELSEIF PV<0 THEN›   PV==+360›  FI›  PX==+cos(PV,5)›  PY==+sin(PV,5)› FI›› FOR i=0 TO LAC› DO     ›  c=AC+TPointSize*i›  p=AP+TPointSize*i›  cp=rot(PA,c)   ›  p.x= cp.x›  p.y= cp.y› OD›RETURN››PROC draw()› TPoint POINTER l,p0,p1› INT i› INT x0,y0,x1,y1› INT ITMR› › CTMR=0             ›› CLS()›                › ;WLine(32,32,96,32,1)› ;WLine(96,32,96,76,1)› ;WLine(96,76,32,76,1)› ;WLine(32,76,32,32,1)›› ;camera(cx-62,cy-63)› › FOR i=0 TO LAL› DO›  l =AL+TPointSize*i›  p0=AP+TPointSize*l.x›  p1=AP+TPointSize*l.y  ›  x0=p0.x+PX›  y0=p0.y+PY›  x1=p1.x+PX ›  y1=p1.y+PY›  WLine(x0,y0,x1,y1,1)› OD ›› ITMR=HTMR*256+LTMR› › PrintF("}x:%I y:%I a:%I (%I)",›        PX,PY,PA,ITMR)››RETURN››PROC main()› init()›        › WHILE SKEY#6› DO›  update()›  draw() › OD›RETURN››